<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2128px" preserveAspectRatio="none" style="width:3558px;height:2128px;background:#FFFFFF;" version="1.1" viewBox="0 0 3558 2128" width="3558px" zoomAndPan="magnify"><defs/><g><rect height="26.2969" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="169" x="1690.5" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="159" x="1695.5" y="27.9951">Settlement Process</text><rect height="168.75" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1237" x="1988.5" y="738.1094"/><rect height="314.375" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1552.5" x="1988.5" y="920.8594"/><rect height="727.4375" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1172.5" x="1504.5" y="1249.2344"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="520" x2="520" y1="130.2344" y2="2035.6094"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="809" x2="809" y1="130.2344" y2="2035.6094"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1163.5" x2="1163.5" y1="130.2344" y2="2035.6094"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1625.5" x2="1625.5" y1="130.2344" y2="2035.6094"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2087.5" x2="2087.5" y1="130.2344" y2="2035.6094"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2685.5" x2="2685.5" y1="130.2344" y2="2035.6094"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="3155.5" x2="3155.5" y1="130.2344" y2="2035.6094"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="336" x="349" y="124.5742">Business Hub Operator User</text><ellipse cx="520" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M520,58.7969 L520,85.7969 M507,66.7969 L533,66.7969 M520,85.7969 L507,100.7969 M520,85.7969 L533,100.7969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="336" x="349" y="2056.8867">Business Hub Operator User</text><ellipse cx="520" cy="2071.0469" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M520,2079.0469 L520,2106.0469 M507,2087.0469 L533,2087.0469 M520,2106.0469 L507,2121.0469 M520,2106.0469 L533,2121.0469 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="41.9375" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="217" x="701" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="203" x="708" y="116.5742">Settlement Bank</text><rect fill="#E2E2F0" height="41.9375" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="217" x="701" y="2034.6094"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="203" x="708" y="2063.8867">Settlement Bank</text><rect fill="#E2E2F0" height="41.9375" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="189" x="1069.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="175" x="1076.5" y="116.5742">Micro-frontend</text><rect fill="#E2E2F0" height="41.9375" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="189" x="1069.5" y="2034.6094"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="175" x="1076.5" y="2063.8867">Micro-frontend</text><rect fill="#E2E2F0" height="41.9375" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="223" x="1514.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="209" x="1521.5" y="116.5742">Experience Layer</text><rect fill="#E2E2F0" height="41.9375" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="223" x="1514.5" y="2034.6094"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="209" x="1521.5" y="2063.8867">Experience Layer</text><rect fill="#E2E2F0" height="41.9375" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="179" x="1998.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="165" x="2005.5" y="116.5742">Process Layer</text><rect fill="#E2E2F0" height="41.9375" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="179" x="1998.5" y="2034.6094"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="165" x="2005.5" y="2063.8867">Process Layer</text><rect fill="#E2E2F0" height="41.9375" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139" x="2616.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="125" x="2623.5" y="116.5742">Report API</text><rect fill="#E2E2F0" height="41.9375" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139" x="2616.5" y="2034.6094"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="125" x="2623.5" y="2063.8867">Report API</text><rect fill="#E2E2F0" height="41.9375" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="3096.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="105" x="3103.5" y="116.5742">Mojaloop</text><rect fill="#E2E2F0" height="41.9375" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="3096.5" y="2034.6094"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="105" x="3103.5" y="2063.8867">Mojaloop</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="3551" x="0" y="167.2031"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="3551" y1="167.2031" y2="167.2031"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="3551" y1="170.2031" y2="170.2031"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2.0;" width="289" x="1631" y="150.2344"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="267" x="1637" y="176.5117">Initiate Settlement</text><polygon fill="#181818" points="1152,243.0781,1162,247.0781,1152,251.0781,1156,247.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="520" x2="1158" y1="247.0781" y2="247.0781"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="17" x="527" y="239.418">1</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="599" x="548" y="239.418">Initiate Settlement for these windows &amp; Currency</text><path d="M5,201.1719 L5,266.1719 L515,266.1719 L515,211.1719 L505,201.1719 L5,201.1719 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M505,201.1719 L505,211.1719 L515,211.1719 L505,201.1719 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="371" x="11" y="228.4492">List of Settlement windows Ids</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="489" x="11" y="256.3867">[Optional] Currency or Settlement Model</text><polygon fill="#181818" points="1614,388.7969,1624,392.7969,1614,396.7969,1618,392.7969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1164" x2="1620" y1="392.7969" y2="392.7969"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="16" x="1171" y="385.1367">2</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="324" x="1191" y="385.1367">POST: /settlements:initiate</text><path d="M601,277.0469 L601,482.0469 L1159,482.0469 L1159,287.0469 L1149,277.0469 L601,277.0469 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1149,277.0469 L1149,287.0469 L1159,287.0469 L1149,277.0469 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="302" x="607" y="304.3242">{"settlementWindows": [</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="15" x="639" y="332.2617">{</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="76" x="655" y="360.1992">"id": 0</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="454" x="639" y="388.1367">}], #settlement window id's (integer)</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="529" x="615" y="416.0742">"settlementModel":"defered net", # (string)</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="449" x="615" y="444.0117">"currency", :"XXX" # (currencyEnum)</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="15" x="615" y="471.9492">}</text><polygon fill="#181818" points="2076,618.3281,2086,622.3281,2076,626.3281,2080,622.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1626" x2="2082" y1="622.3281" y2="622.3281"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1633" y="614.668">3</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="324" x="1654" y="614.668">POST: /settlements:initiate</text><path d="M1063,492.6094 L1063,725.6094 L1621,725.6094 L1621,502.6094 L1611,492.6094 L1063,492.6094 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1611,492.6094 L1611,502.6094 L1621,502.6094 L1611,492.6094 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="302" x="1069" y="519.8867">{"settlementWindows": [</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="15" x="1101" y="547.8242">{</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="76" x="1117" y="575.7617">"id": 0</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="454" x="1101" y="603.6992">}], #settlement window id's (integer)</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="529" x="1077" y="631.6367">"settlementModel":"defered net", # (string)</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="449" x="1077" y="659.5742">"currency", :"XXX" # (currencyEnum)</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="478" x="1077" y="687.5117">"user": "hub operators name" # (string)</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="15" x="1077" y="715.4492">}</text><path d="M1988.5,738.1094 L2453.5,738.1094 L2453.5,758.0469 L2443.5,768.0469 L1988.5,768.0469 L1988.5,738.1094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="168.75" style="stroke:#000000;stroke-width:1.5;" width="1237" x="1988.5" y="738.1094"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="420" x="2003.5" y="761.3867">determine settlement Model/s</text><polygon fill="#181818" points="3144,797.9844,3154,801.9844,3144,805.9844,3148,801.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2088" x2="3150" y1="801.9844" y2="801.9844"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="17" x="2095" y="794.3242">4</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="1023" x="2116" y="794.3242">Load currencies for windows using GET central-settlements/settlementWindows/{id}</text><polygon fill="#181818" points="3144,839.9219,3154,843.9219,3144,847.9219,3148,843.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2088" x2="3150" y1="843.9219" y2="843.9219"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="16" x="2095" y="836.2617">5</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="822" x="2115" y="836.2617">Load settlement models using GET central-ledger/settlementModels</text><line style="stroke:#181818;stroke-width:1.0;" x1="2088" x2="2130" y1="885.8594" y2="885.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="2130" x2="2130" y1="885.8594" y2="898.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="2089" x2="2130" y1="898.8594" y2="898.8594"/><polygon fill="#181818" points="2099,894.8594,2089,898.8594,2099,902.8594,2095,898.8594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="16" x="2095" y="878.1992">6</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="564" x="2115" y="878.1992">Determine minimum list of settlement models</text><path d="M1988.5,920.8594 L2090.5,920.8594 L2090.5,940.7969 L2080.5,950.7969 L1988.5,950.7969 L1988.5,920.8594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="314.375" style="stroke:#000000;stroke-width:1.5;" width="1552.5" x="1988.5" y="920.8594"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="57" x="2003.5" y="944.1367">loop</text><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="330" x="2105.5" y="945.1367">[for settlement models]</text><polygon fill="#181818" points="3144,1049.5469,3154,1053.5469,3144,1057.5469,3148,1053.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2088" x2="3150" y1="1053.5469" y2="1053.5469"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="17" x="2095" y="1017.9492">7</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="221" x="2116" y="990.0117">Create settlement</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="8" x="2116" y="1017.9492"> </text><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="543" x="2124" y="1017.9492">POST: central-settlements/settlements</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="8" x="2667" y="1017.9492"> </text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="530" x="2116" y="1045.8867">{settlementModel, settlementWindowIds[]}</text><polygon fill="#181818" points="3144,1147.3594,3154,1151.3594,3144,1155.3594,3148,1151.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2088" x2="3150" y1="1151.3594" y2="1151.3594"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="16" x="2095" y="1115.7617">8</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="483" x="2115" y="1087.8242">Advance settlement participant account</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="425" x="2123" y="1115.7617">state to PS_TRANSFERS_RECORDED</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="8" x="2115" y="1143.6992"> </text><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="593" x="2123" y="1143.6992">PUT: central-settlements/settlements/{id}</text><path d="M3161,1164.3594 L3161,1229.3594 L3531,1229.3594 L3531,1174.3594 L3521,1164.3594 L3161,1164.3594 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M3521,1164.3594 L3521,1174.3594 L3531,1174.3594 L3521,1164.3594 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="139" x="3167" y="1191.6367">Net credit</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="130" x="3314" y="1191.6367">participant</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="349" x="3167" y="1219.5742">position ledgers are adjusted</text><path d="M1504.5,1249.2344 L1586.5,1249.2344 L1586.5,1269.1719 L1576.5,1279.1719 L1504.5,1279.1719 L1504.5,1249.2344 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="727.4375" style="stroke:#000000;stroke-width:1.5;" width="1172.5" x="1504.5" y="1249.2344"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="37" x="1519.5" y="1272.5117">alt</text><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="129" x="1601.5" y="1273.5117">[Success]</text><polygon fill="#181818" points="1637,1394.8906,1627,1398.8906,1637,1402.8906,1633,1398.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1631" x2="2087" y1="1398.8906" y2="1398.8906"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1643" y="1391.2305">9</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="417" x="1664" y="1391.2305">Return response, sucess HTTP:200</text><path d="M2093,1297.1094 L2093,1474.1094 L2662,1474.1094 L2662,1307.1094 L2652,1297.1094 L2093,1297.1094 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M2652,1297.1094 L2652,1307.1094 L2662,1307.1094 L2652,1297.1094 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="15" x="2099" y="1324.3867">{</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="9" x="2115" y="1352.3242">[</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="516" x="2131" y="1380.2617">"SettlementModel":"defered-net" #(string)</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="349" x="2131" y="1408.1992">"id":null, # optional (integer)</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="409" x="2131" y="1436.1367">"state": "state" # optional (string)</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="15" x="2099" y="1464.0742">}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1504.5" x2="2677" y1="1480.7344" y2="1480.7344"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="90" x="1509.5" y="1503.0117">[Error]</text><polygon fill="#181818" points="1637,1752.1406,1627,1756.1406,1637,1760.1406,1633,1756.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1631" x2="2087" y1="1756.1406" y2="1756.1406"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="34" x="1643" y="1748.4805">10</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="291" x="1681" y="1748.4805">Return Error HTTP: code</text><path d="M2093,1514.6719 L2093,1971.6719 L2662,1971.6719 L2662,1524.6719 L2652,1514.6719 L2093,1514.6719 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M2652,1514.6719 L2652,1524.6719 L2662,1524.6719 L2652,1514.6719 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="15" x="2099" y="1541.9492">{</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="9" x="2115" y="1569.8867">[</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="516" x="2131" y="1597.8242">"SettlementModel":"defered-net" #(string)</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="349" x="2131" y="1625.7617">"id":null, # optional (integer)</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="409" x="2131" y="1653.6992">"state": "state" # optional (string)</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="383" x="2131" y="1681.6367">"errorInformation": { # optional</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="181" x="2155" y="1709.5742">"errorCode": 0,</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="332" x="2155" y="1737.5117">"errorDescription": "string",</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="213" x="2155" y="1765.4492">"extensionList": {</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="164" x="2171" y="1793.3867">"extension": [</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="15" x="2187" y="1821.3242">{</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="180" x="2203" y="1849.2617">"key": "string",</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="280" x="2203" y="1877.1992">"value": "string" } ] } }</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="9" x="2123" y="1905.1367">]</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="15" x="2099" y="1933.0742">}</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="8" x="2099" y="1961.0117"> </text><polygon fill="#181818" points="1175,2013.6094,1165,2017.6094,1175,2021.6094,1171,2017.6094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1169" x2="1625" y1="2017.6094" y2="2017.6094"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="34" x="1181" y="2009.9492">11</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="400" x="1219" y="2009.9492">Update UI with settlement status</text><!--MD5=[1c68b04b6094f2401e1209517f57de2b]
@startuml
skinparam activityFontSize 4
skinparam activityDiamondFontSize 30
skinparam activityArrowFontSize 24
skinparam defaultFontSize 24
skinparam noteFontSize 24
skinparam monochrome true
autonumber

title Settlement Process

actor "Business Hub Operator User" as bu

participant "Settlement Bank" as sbank
participant "Micro-frontend" as ui
participant "Experience Layer" as el
participant "Process Layer" as pl
participant "Report API" as report
participant "Mojaloop" as moja


== Initiate Settlement ==
bu->ui: Initiate Settlement for these windows & Currency

note left
List of Settlement windows Ids
[Optional] Currency or Settlement Model
end note

ui->el: POST: /settlements:initiate 
note left
{"settlementWindows": [
    {
      "id": 0
    }], #settlement window id's (integer)
 "settlementModel":"defered net", # (string)
 "currency", :"XXX" # (currencyEnum)
 }
end note
el->pl: POST: /settlements:initiate
note left
{"settlementWindows": [
    {
      "id": 0
    }], #settlement window id's (integer)
 "settlementModel":"defered net", # (string)
 "currency", :"XXX" # (currencyEnum)
 "user": "hub operators name" # (string) 
 }
end note
group determine settlement Model/s 
pl->moja: Load currencies for windows using GET central-settlements/settlementWindows/{id}
pl->moja: Load settlement models using GET central-ledger/settlementModels 
pl->pl: Determine minimum list of settlement models
end

loop for settlement models
pl->moja: Create settlement \n **POST: central-settlements/settlements** \n{settlementModel, settlementWindowIds[]}
pl->moja: Advance settlement participant account\n state to PS_TRANSFERS_RECORDED \n **PUT: central-settlements/settlements/{id}**
note right moja
**Net credit** participant 
position ledgers are adjusted
end note
end loop

alt Success
pl- ->el: Return response, sucess HTTP:200
note right
 {
   [
     "SettlementModel":"defered-net" #(string)
     "id":null, # optional (integer)
     "state": "state" # optional (string)
 }
end note
else Error
 pl- ->el: Return Error HTTP: code

note right
 {
   [
     "SettlementModel":"defered-net" #(string)
     "id":null, # optional (integer)
     "state": "state" # optional (string)
     "errorInformation": { # optional
        "errorCode": 0,
        "errorDescription": "string",
        "extensionList": {
          "extension": [
            {
              "key": "string",
              "value": "string" } ] } }
    ]
 }

end note
end

el- ->ui: Update UI with settlement status
@enduml

PlantUML version 1.2022.4beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>