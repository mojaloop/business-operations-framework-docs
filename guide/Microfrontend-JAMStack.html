<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Micro-frontend - JAMStack design | Mojaloop Hub Operations Framework Documentation</title>
    <meta name="description" content="">
    
    <meta name="description" content="Business Operations Framework Documentation">
    <meta name="theme-color" content="#00a3ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/business-operations-framework-docs/assets/css/0.styles.73bef9ff.css" as="style"><link rel="preload" href="/business-operations-framework-docs/assets/js/app.e79f47cd.js" as="script"><link rel="preload" href="/business-operations-framework-docs/assets/js/2.65c7ddde.js" as="script"><link rel="preload" href="/business-operations-framework-docs/assets/js/9.b5e52db5.js" as="script"><link rel="prefetch" href="/business-operations-framework-docs/assets/js/10.b28ec649.js"><link rel="prefetch" href="/business-operations-framework-docs/assets/js/11.6dcdbbcd.js"><link rel="prefetch" href="/business-operations-framework-docs/assets/js/12.82166dd3.js"><link rel="prefetch" href="/business-operations-framework-docs/assets/js/13.2649a30f.js"><link rel="prefetch" href="/business-operations-framework-docs/assets/js/14.2190182f.js"><link rel="prefetch" href="/business-operations-framework-docs/assets/js/15.b1da6c39.js"><link rel="prefetch" href="/business-operations-framework-docs/assets/js/16.0cdaddde.js"><link rel="prefetch" href="/business-operations-framework-docs/assets/js/3.94d7a4f5.js"><link rel="prefetch" href="/business-operations-framework-docs/assets/js/4.08734184.js"><link rel="prefetch" href="/business-operations-framework-docs/assets/js/5.f18847b0.js"><link rel="prefetch" href="/business-operations-framework-docs/assets/js/6.19dda1c1.js"><link rel="prefetch" href="/business-operations-framework-docs/assets/js/7.53fee368.js"><link rel="prefetch" href="/business-operations-framework-docs/assets/js/8.0180bbd6.js">
    <link rel="stylesheet" href="/business-operations-framework-docs/assets/css/0.styles.73bef9ff.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="main-docs-wrapper"><div class="main-content-wrapper"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/business-operations-framework-docs/" class="home-link router-link-active"><img src="/business-operations-framework-docs/mojaloop_logo_med.png" alt="Mojaloop Hub Operations Framework Documentation" class="logo"> <span class="site-name can-hide">Mojaloop Hub Operations Framework Documentation</span></a> <!----> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Technical Guide" class="dropdown-title"><span class="title">Technical Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/business-operations-framework-docs/guide/" class="nav-link router-link-active">
  Technical Introduction
  <!----></a></li><li class="dropdown-item"><!----> <a href="/business-operations-framework-docs/guide/SecurityBC.html" class="nav-link">
  RBAC Operational API implementation
  <!----></a></li><li class="dropdown-item"><!----> <a href="/business-operations-framework-docs/guide/Microfrontend-JAMStack.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Micro-frontend - JAMStack design
  <!----></a></li><li class="dropdown-item"><!----> <a href="/business-operations-framework-docs/guide/ReportingBC.html" class="nav-link">
  Reporting BC Implementation
  <!----></a></li><li class="dropdown-item"><!----> <a href="/business-operations-framework-docs/guide/ReportDeveloperGuide.html" class="nav-link">
  Reporting Developer Guide
  <!----></a></li><li class="dropdown-item"><!----> <a href="/business-operations-framework-docs/guide/SettlementBC.html" class="nav-link">
  Settlement Ops Implementation
  <!----></a></li></ul></div></div><div class="nav-item"><a href="https://mojaloop.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mojaloop
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://docs.mojaloop.io/mojaloop-business-docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Business Documents
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div> <!----></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Technical Guide" class="dropdown-title"><span class="title">Technical Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/business-operations-framework-docs/guide/" class="nav-link router-link-active">
  Technical Introduction
  <!----></a></li><li class="dropdown-item"><!----> <a href="/business-operations-framework-docs/guide/SecurityBC.html" class="nav-link">
  RBAC Operational API implementation
  <!----></a></li><li class="dropdown-item"><!----> <a href="/business-operations-framework-docs/guide/Microfrontend-JAMStack.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Micro-frontend - JAMStack design
  <!----></a></li><li class="dropdown-item"><!----> <a href="/business-operations-framework-docs/guide/ReportingBC.html" class="nav-link">
  Reporting BC Implementation
  <!----></a></li><li class="dropdown-item"><!----> <a href="/business-operations-framework-docs/guide/ReportDeveloperGuide.html" class="nav-link">
  Reporting Developer Guide
  <!----></a></li><li class="dropdown-item"><!----> <a href="/business-operations-framework-docs/guide/SettlementBC.html" class="nav-link">
  Settlement Ops Implementation
  <!----></a></li></ul></div></div><div class="nav-item"><a href="https://mojaloop.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mojaloop
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://docs.mojaloop.io/mojaloop-business-docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Business Documents
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Technical Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/business-operations-framework-docs/guide/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/business-operations-framework-docs/guide/SecurityBC.html" class="sidebar-link">RBAC Operational API implementation</a></li><li><a href="/business-operations-framework-docs/guide/Microfrontend-JAMStack.html" aria-current="page" class="active sidebar-link">Micro-frontend - JAMStack design</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/business-operations-framework-docs/guide/Microfrontend-JAMStack.html#overview" class="active sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/business-operations-framework-docs/guide/Microfrontend-JAMStack.html#technology-stack" class="sidebar-link">Technology stack</a></li><li class="sidebar-sub-header"><a href="/business-operations-framework-docs/guide/Microfrontend-JAMStack.html#webpack-building" class="sidebar-link">Webpack building</a></li><li class="sidebar-sub-header"><a href="/business-operations-framework-docs/guide/Microfrontend-JAMStack.html#micro-frontend-loading" class="sidebar-link">Micro-frontend loading</a></li><li class="sidebar-sub-header"><a href="/business-operations-framework-docs/guide/Microfrontend-JAMStack.html#deployments" class="sidebar-link">Deployments</a></li><li class="sidebar-sub-header"><a href="/business-operations-framework-docs/guide/Microfrontend-JAMStack.html#micro-frontend-motivation-in-more-detail" class="sidebar-link">Micro-frontend motivation in more detail</a></li><li class="sidebar-sub-header"><a href="/business-operations-framework-docs/guide/Microfrontend-JAMStack.html#git-repositories" class="sidebar-link">Git repositories</a></li></ul></li><li><a href="/business-operations-framework-docs/guide/ReportingBC.html" class="sidebar-link">Reporting bounded context implementation</a></li><li><a href="/business-operations-framework-docs/guide/ReportDeveloperGuide.html" class="sidebar-link">Report Developer Guide</a></li><li><a href="/business-operations-framework-docs/guide/SettlementBC.html" class="sidebar-link">Settlement Ops Implementation</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="content content__default"><h1 id="micro-frontend-jamstack-design"><a href="#micro-frontend-jamstack-design" class="header-anchor">#</a> Micro-frontend - JAMStack design</h1> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <p>The objective of the micro-frontend - JAMStack design is to create a framework that:</p> <ul><li>empowers the community to collaborate easily (by enabling independent development of components)</li> <li>makes extensions or customizations easy</li> <li>enables community members to contribute back into OSS without branching the whole codebase</li></ul> <h3 id="micro-frontends"><a href="#micro-frontends" class="header-anchor">#</a> Micro-frontends</h3> <p>The framework uses micro-frontends as a means of decoupling parts of the UI to enable maintainable codebases, autonomous teams, independent releases, and incremental upgrades of parts of the UI.</p> <h3 id="jamstack"><a href="#jamstack" class="header-anchor">#</a> JAMStack</h3> <p>The <a href="https://jamstack.org/" target="_blank" rel="noopener noreferrer">JAMStack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> implementation reduces the role of the web server to the distribution static markup files, keeping the functionallity in JavaScript (that is running in the client browser) and in the backend API.</p> <div class="custom-block warning"><p class="custom-block-title">JAMStack stands for:</p> <p><strong>J</strong> - JavaScript<br> <strong>A</strong> - APIs<br> <strong>M</strong> - Static markup</p></div> <p>This stack implementation is considered best practice as it:</p> <ul><li>is much simpler to keep secure</li> <li>provides a good customer experience as it has fast web response times</li> <li>is inexpensive to host</li></ul> <p>In addition, the following have also been engineered and are normally part of a JAMStack implementation:</p> <ul><li>deployment to a content delivery network (CDN)</li> <li>atomic deploys</li> <li>uses dynamically loaded micro-frontends, so updating to the latest version is automatic</li></ul> <h2 id="technology-stack"><a href="#technology-stack" class="header-anchor">#</a> Technology stack</h2> <ol><li><p><strong>React</strong><br>
The framework is based on the React library.<br>
This is the most popular Single Page Application (SPA) library in use, and additionally this choice allows us to capitalize on other community efforts facilitating an easy conversion into this library.<br>
It can be enhanced by using state container libraries (Redux, Flux, MobX), however there is no restriction on a specific one to use.<br>
The micro-frontends come with preconfigured, isolated Redux stores.</p></li> <li><p><strong>Webpack 5</strong><br>
Webpack 5 is currently the only JavaScript bundler that supports remote build separation. It is done by using the Module Federation Plugin.<br>
It enables runtime composition to provide a smooth and fully transparent user experience to the users, resulting in a traditional Single Page Application.<br>
There are additional benefits over other technologies, all that resulting in a small footprint and overall better experience for users.<br>
Webpack 5 will implement the host / child micro-frontends integration at runtime.</p></li> <li><p><strong>CI/CD and atomic deployments</strong> (for example, Github Actions)<br>
Each implementation of the Business Operations Framework will need to implement their own atomic deployment solution.<br>
The standard Business Operations project will use Github Actions to perform the task of executing a continuous integration pipeline, running the relevant tests, building the individual micro-frontend and deploying the resulting static files over a CDN and/or creating a Docker image.<br>
Each micro-frontend is released in complete autonomy: the composed application can use the updated versions of each individual micro-frontend automatically, without involving any further coordination.</p></li> <li><p><strong>Running on a CDN</strong><br>
The micro-frontends can run on a CDN. Individual builds are composed of only static files (HTML, CSS, JavaScript) and can be deployed in different locations / different URLs.<br>
As long as they are available over a secure connection (HTTPS), micro-frontends can be served from any location and also from different CDNs.</p></li> <li><p><strong>Running in Kubernetes</strong><br>
The micro-frontends can run in a Kubernetes environment. There are two approaches that can be taken here:</p> <ul><li>The individual micro-frontends and the shell application are containerized (using, for example, Docker) and then hosted in Kubernetes.<br>
The host and the children apps can be deployed on the same cluster or on different clusters as long as they are publicly accessible.</li> <li>Deploy a private CDN into the Kubernetes cluster, and host the static markup files on the CDN.<br>
There are various CDNs available that are compatible with Kubernetes.</li></ul></li></ol> <h2 id="webpack-building"><a href="#webpack-building" class="header-anchor">#</a> Webpack building</h2> <p>The host and the children apps include scripts to build the distribution artifacts. The build can be done in the developer host machine, in the CI, and in Docker.</p> <h2 id="micro-frontend-loading"><a href="#micro-frontend-loading" class="header-anchor">#</a> Micro-frontend loading</h2> <p>The host is responsible for loading the children apps at runtime. It gathers information about the available children at runtime, from either an API or a registry.</p> <p>The host includes an internal engine responsible for loading only the necessary children when they need to be displayed.</p> <p>The individual micro-frontends will not be loaded when not necessary (for example, when a specific page is not accessed by the user).</p> <p><strong>High-level sequence diagram illustrating how microservices are loaded</strong><br> <img src="/business-operations-framework-docs/assets/img/microfrontendloading.57d17cd2.png" alt="High level sequence diagram illustrating how microservices are loaded"></p> <h3 id="repository-of-micro-frontends"><a href="#repository-of-micro-frontends" class="header-anchor">#</a> Repository of micro-frontends</h3> <p>In order to provide a centralized authority responsible for controlling the individual micro-frontends meeting the necessary requirements, it is suggested to build a solution that works as a registry.</p> <p>The registry would serve the following purposes:</p> <ol><li>allow the community to register the micro-frontends and specify some details</li> <li>expose an API used by the host to retrieve information about the available micro-frontends</li> <li>provide information around the versions of the available micro-frontends</li></ol> <p>The registry does not exist yet, nor does it make sense to create it at this time.</p> <h2 id="deployments"><a href="#deployments" class="header-anchor">#</a> Deployments</h2> <p>The following overview diagram shows the deployment of the micro-frontends to a CDN.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>The deployment of the bounded context API is not covered in this diagram.</p></div> <p><img src="/business-operations-framework-docs/assets/img/BizOps-Framework-Micro-frontend-deploy.6e7bd3be.png" alt="Overview diagram showing deployment"></p> <p>The micro-frontends use atomic deployments and no full-build is ever required.</p> <p>Each individual micro-frontend deploys independently from the other ones.</p> <h3 id="continuous-integration-continuous-delivery-ci-cd"><a href="#continuous-integration-continuous-delivery-ci-cd" class="header-anchor">#</a> Continuous Integration / Continuous Delivery (CI/CD)</h3> <p>Each micro-frontend has its own CI/CD set up; there is no requirement to share the same setup or use the same CI tool.</p> <p>The CI/CD can be configured to support multiple environments, for example, DEV, QA, PROD.</p> <p>Here is an example file showing a git action workflow.</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment"># This is a basic workflow to help you get started with Actions</span>

<span class="token key atrule">name</span><span class="token punctuation">:</span> CI

<span class="token comment"># Controls when the action will run. Triggers the workflow on push or pull request</span>
<span class="token comment"># events but only for the master branch</span>
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> master <span class="token punctuation">]</span>
  <span class="token key atrule">pull_request</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> master <span class="token punctuation">]</span>

<span class="token comment"># A workflow run is made up of one or more jobs that can run sequentially or in parallel</span>
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token comment"># This workflow contains a single job called &quot;build&quot;</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span>
    <span class="token comment"># The type of runner that the job will run on</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest

    <span class="token key atrule">strategy</span><span class="token punctuation">:</span>
      <span class="token key atrule">matrix</span><span class="token punctuation">:</span>
        <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>16.x<span class="token punctuation">]</span>


    <span class="token comment"># Steps represent a sequence of tasks that will be executed as part of the job</span>
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
    <span class="token comment"># Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it</span>
    <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2

    <span class="token comment"># Runs a single command using the runners shell</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Use NodeJS $<span class="token punctuation">{</span><span class="token punctuation">{</span> matrix.node<span class="token punctuation">-</span>version <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v1
      <span class="token key atrule">with</span><span class="token punctuation">:</span>
        <span class="token key atrule">node-version</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> matrix.node<span class="token punctuation">-</span>version <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Cache node modules
      <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/cache@v2
      <span class="token key atrule">env</span><span class="token punctuation">:</span>
        <span class="token key atrule">cache-name</span><span class="token punctuation">:</span> cache<span class="token punctuation">-</span>node<span class="token punctuation">-</span>modules
      <span class="token key atrule">with</span><span class="token punctuation">:</span>
        <span class="token comment"># npm cache files are stored in `~/.npm` on Linux/macOS</span>
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">'**/node_modules'</span>
        <span class="token key atrule">key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> runner.os <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">-</span>build<span class="token punctuation">-</span>$<span class="token punctuation">{</span><span class="token punctuation">{</span> env.cache<span class="token punctuation">-</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">-</span>$<span class="token punctuation">{</span><span class="token punctuation">{</span> hashFiles('<span class="token important">**/yarn.lock')</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">restore-keys</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          ${{ runner.os }}-build-${{ env.cache-name }}-
          ${{ runner.os }}-build-
          ${{ runner.os }}-</span>
    <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> yarn install <span class="token punctuation">-</span><span class="token punctuation">-</span>frozen<span class="token punctuation">-</span>lockfile
    <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> yarn lint
    <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> yarn test
    <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> yarn build
<span class="token comment">#    - name: Slack Notification</span>
<span class="token comment">#      uses: rtCamp/action-slack-notify@v2.0.2</span>
<span class="token comment">#      env:</span>
<span class="token comment">#        SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}</span>
</code></pre></div><h3 id="cdns"><a href="#cdns" class="header-anchor">#</a> CDNs</h3> <p>The resulting SPA is served by a CDN or multiple CDNs. Individual micro-frontends can live in different CDNs.</p> <h3 id="kubernetes"><a href="#kubernetes" class="header-anchor">#</a> Kubernetes</h3> <p>The resulting SPA can run and be served in one or more Kubernetes environments.</p> <h3 id="host-application"><a href="#host-application" class="header-anchor">#</a> Host application</h3> <p>The host application comes with a pre-configured setup out-of-the-box. It does not need any particular configuration different from a traditional SPA more than the Webpack 5 Module Federation configuration.<br>
It will be acting as the orchestrator, loading the remote micro-frontends and providing them with app-wide functionality, for example, authentication, RBAC, client-side routing.</p> <p>There is virtually no limit on how the host can grow and how much can be extended.<br>
It is suggested, however, to centralize all the host-child communication and shared components in an external library so that both host and children have the same knowledge and integration will not break.</p> <h3 id="versioning-micro-frontends"><a href="#versioning-micro-frontends" class="header-anchor">#</a> Versioning micro-frontends</h3> <p>​The suggested approach is to build a registry where individual apps are registered. The registry would allow to set some configuration on each app and keep track of all the available versions.<br>
​<br>
The registry would then expose an API consumed by the host, providing information around the available micro-frontends, the versions, and the artifact locations.<br>
​<br>
The registry would be administered by a trusted operator through a user interface; it would be the trusted operator’s responsibility to decide which version of each individual app would be made public and available to the host to load.<br>
It would also allow to easily test versions and roll back when necessary, all that without needing to rebuild and redeploy the apps.<br>
​</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>The JS build artifacts created by Webpack do not include the version in the filename. It could be necessary to upgrade the build in order to differentiate versions. A simpler approach that does not require to update the build configuration would be hosting the versions on different URLs.</p></div> <p>​</p> <h3 id="upgrading-the-host"><a href="#upgrading-the-host" class="header-anchor">#</a> Upgrading the host</h3> <p>​The host is pretty much self-isolated and the only necessary thing to do proper versioning is to use the built-in command <code>yarn version</code>. It will create a new git tag and increment the <code>package.json</code> version according to how the command is used (interactive CLI).<br>
​</p> <h3 id="upgrading-the-remotes"><a href="#upgrading-the-remotes" class="header-anchor">#</a> Upgrading the remotes</h3> <p>​The remotes are self-isolated and the only necessary thing to do proper versioning is to use the built-in command <code>yarn version</code>. It will create a new git tag and increment the <code>package.json</code> version according to how the command is used (interactive CLI).</p> <h3 id="menu-app-composition"><a href="#menu-app-composition" class="header-anchor">#</a> Menu / App composition</h3> <p>​The host is configured to dynamically build the <em>Menu</em> and the <em>Pages</em> (with react-router) structure. Currently, the <em>Menu</em> component(s) is imported from the <code>@modusbox/react-components</code> library.<br>
​<br>
It is not strictly necessary to use such components and the host / remotes could use custom components, as long as they allow dynamic composition and support routing.<br>
​​</p> <h2 id="micro-frontend-motivation-in-more-detail"><a href="#micro-frontend-motivation-in-more-detail" class="header-anchor">#</a> Micro-frontend motivation in more detail</h2> <p>​Building scalable and distributed user interfaces is complicated; logic complexity, testing setups, build and deployment costs increase over time. ​Architectural decisions taken in the initial phase can raise unnecessary complexity and highly affect development costs in later stages.​ Furthermore, a single project does not scale well with distributed teams co-working on the same codebase.​ Switching to a micro-frontend setup can solve all the above issues; it scales well, atomic deployments do not need a full build, and independent teams can use different codebases.​​</p> <h3 id="what-defines-a-micro-frontend"><a href="#what-defines-a-micro-frontend" class="header-anchor">#</a> What defines a micro-frontend</h3> <p>​The main rules that can define a micro-frontend setup can be summarized in the following:​</p> <p><strong>Single responsibility</strong><br>
Defined and closed boundaries<br>
Centralized orchestration​<br>
Single responsibility<br>
​Each micro-frontend app should only provide specific business features. A micro-frontend app does not need to know about other aspects of the business and it can scale independently.​</p> <p><strong>Defined and closed boundaries</strong><br>
​Each micro-frontend should be isolated, own its own data, and direct communication between micro-frontends should not be possible.​</p> <p><strong>Centralized orchestration</strong><br>
​Each micro-frontend should be loaded, handled, and controlled by a host. Application-wide features are provided by the host (authentication, routing, and so on).​​</p> <h3 id="types-of-micro-frontend-setups"><a href="#types-of-micro-frontend-setups" class="header-anchor">#</a> Types of micro-frontend setups</h3> <p>​There are several ways to implement micro-frontends, to list a few:​</p> <ul><li>Iframe composition</li> <li>Runtime composition</li> <li>Module federation (single framework) composition​</li></ul> <p><strong>Iframe composition</strong><br>
​Iframe composition is possibly the oldest and easiest way to implement micro-frontends, due to old HTML support to iframes and the native context isolation it provides. Communication between the host and the micro-frontends is generally hard to achieve and also does not fit well in modern web.​</p> <p><strong>Runtime composition</strong><br>
​Runtime composition is the idea of dynamically loading JS scripts located over http/https urls and compose the result locally. ​While it allows you to theoretically use independent technologies for each micro-frontend, it is also very hard to maintain due to the differences between the frameworks used in the micro-frontends.​​</p> <p><strong>SPA composition</strong><br>
​Module federation is a technology implemented in Webpack 5 that allows you to dynamically load remote modules at runtime. When combined with a single application framework (for example, React), it allows built applications to be split into multiple micro-frontends without sacrificing the benefits an SPA provides. It also comes with the advantage of smaller build sizes.​​</p> <h3 id="the-chosen-setup"><a href="#the-chosen-setup" class="header-anchor">#</a> The chosen setup</h3> <p>We have chosen to use SPA composition using Webpack 5 and React. It is worth mentioning that in order to build an SPA with multiple micro-frontends, a specific and rigorous contract between the host and the frontends needs to be implemented and respected.​ From now on we will be referring to micro-frontends in the technical form used by Webpack 5: remotes. ​The contract is defined by the following rules:​</p> <ul><li>The host retrieves the list of remotes dynamically and asynchronously</li> <li>The host is responsible of loading the remotes</li> <li>The host shares some context with the remotes (routing, authentication)</li> <li>The remotes have unique names</li> <li>The remotes are deployed in different urls</li> <li>The remotes do not use global CSS rules</li> <li>The remotes export themselves as defined by the modules federation rules</li> <li>The remotes share the same React (and some library) version​</li></ul> <p>When these rules are respected, there is virtually no limit to how the SPA can grow.​ Most of the basic dependencies used in each frontend are provided by the host. That makes it easy when they need to be upgraded. ​Each application is built independently from the others; the CI/CD pipeline remains fast, atomic deployments do not require complex setups and each remote is released at its own pace with no need to modify the host in any way.​</p> <h3 id="live-example-hosted-on-a-cdn"><a href="#live-example-hosted-on-a-cdn" class="header-anchor">#</a> Live example hosted on a CDN</h3> <p>Check out the following live example: <a href="https://microfrontend-shell-boilerplate.vercel.app/" target="_blank" rel="noopener noreferrer">https://microfrontend-shell-boilerplate.vercel.app/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="git-repositories"><a href="#git-repositories" class="header-anchor">#</a> Git repositories</h2> <p>Here is a list of Git repositories that are part of this implementation:</p> <ul><li><a href="https://github.com/mojaloop/microfrontend-shell-boilerplate" target="_blank" rel="noopener noreferrer">Micro frontend-shell-boilerplate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/mojaloop/microfrontend-boilerplate" target="_blank" rel="noopener noreferrer">Micro frontend-boilerplate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/modusintegration/microfrontend-utils" target="_blank" rel="noopener noreferrer">Micro frontend-utils<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>
Library shared with both the shell application and the micro-frontend.</li> <li><a href="https://github.com/mojaloop/reporting-hub-bop-role-ui" target="_blank" rel="noopener noreferrer">Reporting-Hub BizOps Role Assignment Micro-frontend<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/mojaloop/reporting-hub-bop-trx-ui" target="_blank" rel="noopener noreferrer">Reporting-Hub BizOps Transaction Tracing Micro-frontend<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/4/2021, 10:21:10 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/business-operations-framework-docs/guide/SecurityBC.html" class="prev">
        RBAC Operational API implementation
      </a></span> <span class="next"><a href="/business-operations-framework-docs/guide/ReportingBC.html">
        Reporting bounded context implementation
      </a>
      →
    </span></p></div> </main> <!----></div></div> <!----></div><div class="global-ui"><!----></div></div>
    
    <script src="/business-operations-framework-docs/assets/js/app.e79f47cd.js" defer></script><script src="/business-operations-framework-docs/assets/js/2.65c7ddde.js" defer></script><script src="/business-operations-framework-docs/assets/js/9.b5e52db5.js" defer></script>
  </body>
</html>
